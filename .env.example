# Environment Variables Template

Copy this file to `.env` and fill in the values. Never commit `.env` to version control.

## Required for Production

```bash
# Environment
ENVIRONMENT=production

# Security - CRITICAL: Generate strong random values
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=<generate-strong-random-32-plus-chars>
ENCRYPTION_KEY=<generate-strong-random-32-plus-chars>
ENCRYPTION_SALT=<generate-strong-random-16-plus-chars>

# Database
DATABASE_URL=postgresql://user:password@localhost:5432/floyo

# Redis (highly recommended for production)
REDIS_URL=redis://localhost:6379/0

# CORS - Comma-separated list of allowed origins
CORS_ORIGINS=https://app.floyo.com,https://www.floyo.com

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# Frontend
NEXT_PUBLIC_API_URL=https://api.floyo.com
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
NEXT_PUBLIC_SENTRY_DSN=<optional>
NEXT_PUBLIC_POSTHOG_KEY=<optional>
NEXT_PUBLIC_POSTHOG_HOST=<optional>
NEXT_PUBLIC_HCAPTCHA_SITEKEY=<optional>
NEXT_PUBLIC_PRIVACY_KILL_SWITCH=<optional>
NEXT_PUBLIC_TRUST_STATUS_PAGE=<optional>
NEXT_PUBLIC_TRUST_HELP_CENTER=<optional>
NEXT_PUBLIC_TRUST_EXPORT=<optional>
NODE_ENV=production
```

## Docker Compose Variables

```bash
# Docker Compose Configuration
POSTGRES_USER=floyo
POSTGRES_PASSWORD=<strong-password>
POSTGRES_DB=floyo
POSTGRES_PORT=5432
POSTGRES_CONTAINER_NAME=floyo-postgres

REDIS_URL=redis://redis:6379/0
REDIS_PORT=6379
REDIS_PASSWORD=<optional>
REDIS_CONTAINER_NAME=floyo-redis

BACKEND_CONTAINER_NAME=floyo-backend
CELERY_CONTAINER_NAME=floyo-celery
FLOWER_CONTAINER_NAME=floyo-flower
FLOWER_PORT=5555

FRONTEND_CONTAINER_NAME=floyo-frontend
FRONTEND_PORT=3000
```

## Optional Configuration

```bash
# Sentry Error Tracking
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Email Service (SendGrid)
SENDGRID_API_KEY=your-sendgrid-api-key
EMAIL_FROM=noreply@floyo.com

# Supabase (required for Supabase features)
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
SUPABASE_PROJECT_REF=your-project-ref
SUPABASE_ACCESS_TOKEN=<optional-for-api-access>

# Supabase Configuration
SUPABASE_SITE_URL=https://app.floyo.com
SUPABASE_ADDITIONAL_REDIRECT_URLS=
SUPABASE_JWT_EXPIRY=3600
SUPABASE_ENABLE_SIGNUP=true
SUPABASE_REALTIME_ENABLED=true
SUPABASE_STORAGE_ENABLED=true
SUPABASE_STORAGE_FILE_SIZE_LIMIT=52428800
SUPABASE_EDGE_RUNTIME_ENABLED=true
SUPABASE_API_PORT=54321
SUPABASE_DB_PORT=6543
SUPABASE_SHADOW_PORT=6544
SUPABASE_POOLER_PORT=6543
SUPABASE_REALTIME_IP_VERSION=ipv4

# JWT Configuration
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
ALGORITHM=HS256

# Database Pool Configuration
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_RECYCLE=3600
```

## Development Configuration

For development, you can use:

```bash
ENVIRONMENT=development

# Development defaults (less secure, but convenient)
SECRET_KEY=dev-secret-key-change-in-production-min-32-chars
ENCRYPTION_KEY=dev-encryption-key-change-in-production-min-32-chars
ENCRYPTION_SALT=dev-salt-min-16-chars

# Local database
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/floyo_dev

# Local Redis (optional)
REDIS_URL=redis://localhost:6379/0

# CORS for local development
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# Frontend
NEXT_PUBLIC_API_URL=http://localhost:8000
```

## Generating Secure Keys

### Python
```python
import secrets

# Generate SECRET_KEY
print(f"SECRET_KEY={secrets.token_urlsafe(32)}")

# Generate ENCRYPTION_KEY
print(f"ENCRYPTION_KEY={secrets.token_urlsafe(32)}")

# Generate ENCRYPTION_SALT
print(f"ENCRYPTION_SALT={secrets.token_urlsafe(16)}")
```

### OpenSSL
```bash
# Generate SECRET_KEY
openssl rand -base64 32

# Generate ENCRYPTION_KEY
openssl rand -base64 32

# Generate ENCRYPTION_SALT
openssl rand -base64 16
```

## Security Notes

1. **Never commit `.env` files** - Add to `.gitignore`
2. **Use different keys for each environment** - Don't reuse production keys in development
3. **Rotate keys regularly** - Especially if compromised
4. **Use secrets management** - In production, use AWS Secrets Manager, HashiCorp Vault, etc.
5. **Minimum lengths**:
   - `SECRET_KEY`: 32+ characters
   - `ENCRYPTION_KEY`: 32+ characters
   - `ENCRYPTION_SALT`: 16+ characters

## Validation

The application will validate these settings on startup:
- Production environment requires all security keys
- Keys must meet minimum length requirements
- Weak/default keys are rejected in production
- CORS origins cannot be `*` in production

See `backend/config.py` for validation details.
