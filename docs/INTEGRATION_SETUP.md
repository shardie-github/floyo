# Integration Setup Guide

**Last Updated:** Auto-generated by Autonomous Full-Stack Guardian  
**Status:** Complete integration setup documentation

---

## Overview

This guide covers setting up external integrations for the Floyo platform. All integrations require API keys and proper configuration.

---

## Zapier Integration

### Status: ✅ **ENDPOINTS IMPLEMENTED**

### Setup Steps

1. **Get Zapier Secret**
   ```bash
   # Generate a secure secret
   openssl rand -hex 32
   ```

2. **Set Environment Variable**
   - Add to `.env.local`:
     ```bash
     ZAPIER_SECRET=your-generated-secret
     ```
   - Add to Vercel Environment Variables (Production/Preview)

3. **Configure Zapier Webhooks**
   
   In Zapier, configure webhooks with:
   - **URL:** `https://your-app.vercel.app/api/etl/{endpoint}`
   - **Method:** POST
   - **Headers:**
     ```
     Authorization: Bearer {ZAPIER_SECRET}
     Content-Type: application/json
     ```

4. **Available Endpoints**
   - `/api/etl/meta` - Meta Ads ETL
   - `/api/etl/tiktok` - TikTok Ads ETL
   - `/api/etl/shopify` - Shopify Orders ETL
   - `/api/etl/metrics` - Metrics Computation

### Testing

```bash
# Test endpoint
curl -X POST https://your-app.vercel.app/api/etl/meta \
  -H "Authorization: Bearer YOUR_ZAPIER_SECRET" \
  -H "Content-Type: application/json" \
  -d '{"data": {}, "timestamp": "2025-01-XXT00:00:00Z"}'
```

---

## TikTok Ads Integration

### Status: ⚠️ **PENDING API IMPLEMENTATION**

### Setup Steps

1. **Create TikTok Ads App**
   - Go to [TikTok Ads Manager](https://ads.tiktok.com/)
   - Create a new app
   - Get API credentials

2. **Set Environment Variables**
   ```bash
   TIKTOK_ADS_API_KEY=your-api-key
   TIKTOK_ADS_API_SECRET=your-api-secret
   ```

3. **Implement OAuth Flow**
   - Create `/api/integrations/tiktok/oauth` endpoint
   - Handle OAuth callback
   - Store access tokens securely

4. **Create Campaign Endpoints**
   - `GET /api/integrations/tiktok/campaigns` - Fetch campaigns
   - `POST /api/integrations/tiktok/sync` - Sync campaign data

### API Documentation
- [TikTok Ads API Docs](https://ads.tiktok.com/help/article?aid=10028)

---

## Meta Ads Integration

### Status: ⚠️ **PENDING API IMPLEMENTATION**

### Setup Steps

1. **Create Meta App**
   - Go to [Meta for Developers](https://developers.facebook.com/)
   - Create a new app
   - Add "Marketing API" product
   - Get App ID and App Secret

2. **Set Environment Variables**
   ```bash
   META_ADS_APP_ID=your-app-id
   META_ADS_APP_SECRET=your-app-secret
   META_ADS_ACCESS_TOKEN=your-access-token
   ```

3. **Implement OAuth Flow**
   - Create `/api/integrations/meta/oauth` endpoint
   - Request required permissions:
     - `ads_read`
     - `ads_management`
   - Handle OAuth callback
   - Store access tokens securely

4. **Create Campaign Endpoints**
   - `GET /api/integrations/meta/campaigns` - Fetch campaigns
   - `POST /api/integrations/meta/sync` - Sync campaign data

### API Documentation
- [Meta Marketing API Docs](https://developers.facebook.com/docs/marketing-apis)

---

## ElevenLabs Integration

### Status: ⚠️ **PENDING API IMPLEMENTATION**

### Setup Steps

1. **Get API Key**
   - Sign up at [ElevenLabs](https://elevenlabs.io/)
   - Go to Profile > API Key
   - Generate API key

2. **Set Environment Variable**
   ```bash
   ELEVENLABS_API_KEY=your-api-key
   ```

3. **Create Endpoints**
   - `POST /api/integrations/elevenlabs/synthesize` - Voice synthesis
   - `GET /api/integrations/elevenlabs/voices` - List voices

### API Documentation
- [ElevenLabs API Docs](https://elevenlabs.io/docs/api-reference)

---

## AutoDS Integration

### Status: ⚠️ **PENDING API IMPLEMENTATION**

### Setup Steps

1. **Get API Key**
   - Log in to AutoDS
   - Go to Settings > API
   - Generate API key

2. **Set Environment Variable**
   ```bash
   AUTODS_API_KEY=your-api-key
   ```

3. **Create Endpoints**
   - `POST /api/integrations/autods/products` - Import products
   - `GET /api/integrations/autods/orders` - Fetch orders

### API Documentation
- [AutoDS API Docs](https://help.autods.com/en/articles/autods-api-documentation)

---

## CapCut Integration

### Status: ⚠️ **PENDING API IMPLEMENTATION**

### Setup Steps

1. **Get API Key**
   - Contact CapCut for API access
   - Get API credentials

2. **Set Environment Variable**
   ```bash
   CAPCUT_API_KEY=your-api-key
   ```

3. **Create Endpoints**
   - `POST /api/integrations/capcut/projects` - Create project
   - `GET /api/integrations/capcut/templates` - List templates

---

## MindStudio Integration

### Status: ⚠️ **PENDING API IMPLEMENTATION**

### Setup Steps

1. **Get API Key**
   - Sign up at [MindStudio](https://mindstudio.ai/)
   - Go to API Settings
   - Generate API key

2. **Set Environment Variable**
   ```bash
   MINSTUDIO_API_KEY=your-api-key
   ```

3. **Create Endpoints**
   - `POST /api/integrations/mindstudio/agents` - Create agent
   - `GET /api/integrations/mindstudio/agents` - List agents

---

## Integration Status Check

### Check Integration Status

```bash
# Get integration status
curl https://your-app.vercel.app/api/integrations/status
```

Response:
```json
{
  "status": "ok",
  "integrations": [
    {
      "id": "zapier",
      "name": "Zapier",
      "enabled": true,
      "status": "configured"
    }
  ]
}
```

---

## Security Best Practices

1. **Never commit API keys to git**
   - Use environment variables
   - Store in Vercel Environment Variables for production

2. **Rotate secrets regularly**
   - Rotate `ZAPIER_SECRET` quarterly
   - Rotate API keys when compromised

3. **Use secure storage**
   - Encrypt sensitive credentials in database
   - Use Supabase Vault for secrets (if available)

4. **Monitor integration usage**
   - Check `/api/integrations/status` regularly
   - Monitor audit logs for integration events

---

## Troubleshooting

### Zapier Webhooks Not Working

**Symptoms:**
- Webhook returns 401 Unauthorized
- Webhook returns 500 Internal Server Error

**Solutions:**
1. Verify `ZAPIER_SECRET` is set correctly
2. Check Authorization header format: `Bearer {secret}`
3. Check Vercel function logs for errors
4. Verify Supabase connection

### Integration API Errors

**Symptoms:**
- API calls fail
- Authentication errors

**Solutions:**
1. Verify API keys are set correctly
2. Check API key expiration
3. Verify OAuth tokens are valid
4. Check API rate limits

---

## Next Steps

1. **Implement TikTok Ads API** (High Priority)
   - OAuth flow
   - Campaign endpoints
   - ETL pipeline

2. **Implement Meta Ads API** (High Priority)
   - OAuth flow
   - Campaign endpoints
   - ETL pipeline

3. **Implement Remaining Integrations** (Medium Priority)
   - ElevenLabs
   - AutoDS
   - CapCut
   - MindStudio

4. **Add Integration Dashboard** (Low Priority)
   - UI for managing integrations
   - Connection status display
   - Configuration interface

---

## Support

For integration issues:
- Check health reports in `/reports`
- Review API documentation
- Check Vercel function logs
- Create issue on GitHub
