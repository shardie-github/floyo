{
  "name": "Floyo ETL Automation (Zapier Fallback)",
  "description": "High-level recipe for automating ETL via Zapier if GitHub Actions unavailable",
  "version": "1.0",
  "timezone": "America/Toronto",
  "zaps": [
    {
      "name": "Nightly Meta Ads ETL",
      "trigger": {
        "type": "schedule",
        "frequency": "daily",
        "time": "01:10",
        "timezone": "America/Toronto"
      },
      "action": {
        "type": "webhook",
        "method": "POST",
        "url": "https://your-api.com/etl/meta",
        "headers": {
          "Authorization": "Bearer {{ZAPIER_SECRET}}"
        }
      }
    },
    {
      "name": "Nightly TikTok Ads ETL",
      "trigger": {
        "type": "schedule",
        "frequency": "daily",
        "time": "01:15",
        "timezone": "America/Toronto"
      },
      "action": {
        "type": "webhook",
        "method": "POST",
        "url": "https://your-api.com/etl/tiktok",
        "headers": {
          "Authorization": "Bearer {{ZAPIER_SECRET}}"
        }
      }
    },
    {
      "name": "Nightly Shopify Orders ETL",
      "trigger": {
        "type": "schedule",
        "frequency": "daily",
        "time": "01:20",
        "timezone": "America/Toronto"
      },
      "action": {
        "type": "webhook",
        "method": "POST",
        "url": "https://your-api.com/etl/shopify",
        "headers": {
          "Authorization": "Bearer {{ZAPIER_SECRET}}"
        }
      }
    },
    {
      "name": "Nightly Metrics Computation",
      "trigger": {
        "type": "schedule",
        "frequency": "daily",
        "time": "01:25",
        "timezone": "America/Toronto"
      },
      "action": {
        "type": "webhook",
        "method": "POST",
        "url": "https://your-api.com/etl/metrics",
        "headers": {
          "Authorization": "Bearer {{ZAPIER_SECRET}}"
        }
      }
    },
    {
      "name": "D1 Retention Email",
      "trigger": {
        "type": "schedule",
        "frequency": "daily",
        "time": "09:00",
        "timezone": "America/Toronto"
      },
      "action": {
        "type": "filter",
        "condition": "user.signup_date == yesterday AND user.workflows_created == 0"
      },
      "action2": {
        "type": "email",
        "template": "d1_retention",
        "to": "{{user.email}}"
      }
    },
    {
      "name": "D7 Retention Email",
      "trigger": {
        "type": "schedule",
        "frequency": "daily",
        "time": "09:00",
        "timezone": "America/Toronto"
      },
      "action": {
        "type": "filter",
        "condition": "user.signup_date == 7_days_ago AND user.last_active_date < 3_days_ago"
      },
      "action2": {
        "type": "email",
        "template": "d7_retention",
        "to": "{{user.email}}"
      }
    }
  ],
  "notes": [
    "This is a fallback specification if GitHub Actions are unavailable",
    "In production, prefer GitHub Actions for ETL (more reliable, version-controlled)",
    "Zapier can be used for email campaigns and simple webhooks",
    "All webhooks should be secured with authentication"
  ]
}
